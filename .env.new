# ============================================================================
# DOCKER COMPOSE ENVIRONMENT CONFIGURATION
# Colombia Intelligence & Language Learning Platform
# ============================================================================
# ⚠️  CRITICAL: These are NEW credentials generated after security audit
# The old credentials were exposed in git history and have been rotated
# ============================================================================

# ----------------------------------------------------------------------------
# CORE APPLICATION SETTINGS
# ----------------------------------------------------------------------------
ENVIRONMENT=development
DEBUG=true
LOG_LEVEL=INFO

# ========================================
# SECURITY - ✅ NEW CREDENTIALS (Nov 3, 2025)
# ========================================
# ⚠️  IMPORTANT: This is a NEW secret key generated specifically for you
# The old key (57eb2b1...) was exposed and must not be used anymore
SECRET_KEY=Eo7q9Xsd8Xn7X1PaeOUZJfoYg9HSIlGt6bOlQvY2inU

# ========================================
# DATABASE - ⚠️  ACTION REQUIRED
# ========================================
# TODO: Update with YOUR new PostgreSQL password
# Old password was exposed in git history
DATABASE_URL=postgresql://colombian_user:YOUR_NEW_PASSWORD_HERE@localhost:5432/colombian_platform

# ========================================
# REDIS - ⚠️  ACTION REQUIRED
# ========================================
# TODO: Generate new password in Redis Cloud console
# Old password (lXXQHq...pjCG0) was exposed
REDIS_URL=redis://default:YOUR_NEW_REDIS_PASSWORD@redis-18712.c60.us-west-1-2.ec2.redns.redis-cloud.com:18712/0
CELERY_BROKER_URL=redis://default:YOUR_NEW_REDIS_PASSWORD@redis-18712.c60.us-west-1-2.ec2.redns.redis-cloud.com:18712/0
CELERY_RESULT_BACKEND=redis://default:YOUR_NEW_REDIS_PASSWORD@redis-18712.c60.us-west-1-2.ec2.redns.redis-cloud.com:18712/0
CACHE_KEY_PREFIX=open_learn

# ======================
# Colombian Government API Keys
# ======================

# DANE (National Statistics Department)
DANE_API_KEY=your_dane_api_key_here
DANE_BASE_URL=https://www.dane.gov.co/api

# Banco de la República (Central Bank)
BANREP_BASE_URL=https://www.banrep.gov.co/api

# SECOP (Public Procurement)
SECOP_API_TOKEN=your_secop_token_here
SECOP_BASE_URL=https://www.colombiacompra.gov.co/api

# Datos Abiertos (Open Data Portal)
DATOS_GOV_BASE_URL=https://www.datos.gov.co/api

# DNP (National Planning Department)
DNP_BASE_URL=https://www.dnp.gov.co/api

# IDEAM (Weather and Climate)
IDEAM_API_KEY=your_ideam_api_key_here
IDEAM_BASE_URL=https://www.ideam.gov.co/api

# MinHacienda (Ministry of Finance)
MINHACIENDA_BASE_URL=https://www.minhacienda.gov.co/api

# ======================
# Scraper Configuration
# ======================
SCRAPER_RATE_LIMIT=5
SCRAPER_TIMEOUT=30
SCRAPER_MAX_RETRIES=3
USER_AGENT_ROTATION=true
USER_AGENT_POOL=Mozilla/5.0 (compatible; ColombianPlatformBot/1.0; Educational)
SCRAPED_CONTENT_PATH=/data/scraped
CONTENT_RETENTION_DAYS=30
RESPECT_ROBOTS_TXT=true
MIN_REQUEST_DELAY=10

# ======================
# NLP and Language Processing
# ======================
ENABLE_ENTITY_EXTRACTION=true
ENABLE_DIFFICULTY_SCORING=true
ENABLE_VOCABULARY_EXTRACTION=true
SPANISH_NLP_MODEL=es_core_news_sm
DIFFICULTY_MIN_SCORE=1.0
DIFFICULTY_MAX_SCORE=5.0
EXTRACT_COLOMBIAN_ENTITIES=true
ENABLE_REGIONAL_DETECTION=true

# ======================
# Monitoring and Logging
# ======================
LOG_LEVEL=INFO
API_LOG_LEVEL=INFO
SCRAPER_LOG_LEVEL=INFO
NLP_LOG_LEVEL=INFO
LOG_FILE_PATH=/app/logs/app.log
ERROR_LOG_PATH=/app/logs/error.log
ACCESS_LOG_PATH=/app/logs/access.log
ENABLE_METRICS=true
METRICS_PORT=8001
ENABLE_HEALTH_CHECKS=true
SENTRY_DSN=your_sentry_dsn_here
SENTRY_ENVIRONMENT=development

# ======================
# Security Settings - ✅ IMPROVED
# ======================
# ⚠️  PRODUCTION: Remove "*" and use specific domains!
# Example for production: CORS_ALLOWED_ORIGINS=https://yourdomain.com,https://www.yourdomain.com
CORS_ALLOWED_ORIGINS=http://localhost:3000,http://127.0.0.1:3000,http://localhost:3006,http://127.0.0.1:3006

CORS_ALLOW_CREDENTIALS=true
CSRF_TRUSTED_ORIGINS=http://localhost:3000,http://127.0.0.1:3000

# ⚠️  PRODUCTION: Set these to true when using HTTPS!
SESSION_COOKIE_SECURE=false
SESSION_COOKIE_HTTPONLY=true
SESSION_COOKIE_SAMESITE=Lax

PASSWORD_MIN_LENGTH=8
PASSWORD_REQUIRE_UPPERCASE=true
PASSWORD_REQUIRE_NUMBERS=true

# ======================
# Email Configuration (Optional)
# ======================
EMAIL_BACKEND=django.core.mail.backends.console.EmailBackend
EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=587
EMAIL_USE_TLS=true
EMAIL_HOST_USER=your_email@gmail.com
EMAIL_HOST_PASSWORD=your_email_app_password

# ======================
# Media and Static Files
# ======================
MEDIA_URL=/media/
STATIC_URL=/static/
STATIC_ROOT=/app/staticfiles/

# ======================
# Caching Configuration
# ======================
DEFAULT_CACHE_TTL=3600
API_CACHE_TTL=1800
SCRAPER_CACHE_TTL=7200
NLP_CACHE_TTL=86400
CACHE_KEY_PREFIX=colombian_platform
CACHE_VERSION=1

# ======================
# Queue and Task Configuration
# ======================
CELERY_WORKER_CONCURRENCY=4
CELERY_WORKER_PREFETCH_MULTIPLIER=1
CELERY_TASK_ALWAYS_EAGER=false
ENABLE_PERIODIC_TASKS=true
COLLECTION_SCHEDULE_ENABLED=true

# ======================
# Development Settings
# ======================
ENABLE_DEBUG_TOOLBAR=true
ENABLE_SHELL_PLUS=true
ENABLE_API_DOCS=true
ENABLE_ADMIN_INTERFACE=true

# ======================
# Testing Configuration
# ======================
TESTING=false
TEST_RUNNER=pytest
MOCK_EXTERNAL_APIS=true
MOCK_SCRAPERS=true

# ======================
# Performance Settings
# ======================
DATABASE_CONN_POOL_SIZE=20
DATABASE_CONN_MAX_OVERFLOW=0
API_REQUEST_TIMEOUT=30
SCRAPER_REQUEST_TIMEOUT=60
MAX_MEMORY_USAGE=1GB
MAX_REQUEST_SIZE=10MB

# ======================
# Frontend Configuration
# ======================
REACT_APP_API_URL=http://localhost:8000
REACT_APP_WS_URL=ws://localhost:8000/ws
REACT_APP_ENVIRONMENT=development

# ======================
# Business Logic Settings
# ======================
HIGH_PRIORITY_UPDATE_INTERVAL=30
MEDIUM_PRIORITY_UPDATE_INTERVAL=60
LOW_PRIORITY_UPDATE_INTERVAL=120
MIN_ARTICLE_LENGTH=100
MAX_ARTICLE_LENGTH=50000
ENABLE_DUPLICATE_DETECTION=true
DEFAULT_DIFFICULTY_LEVEL=intermediate
ENABLE_PROGRESS_TRACKING=true
VOCABULARY_MIN_FREQUENCY=2

# ======================
# External Service URLs
# ======================
TWITTER_API_KEY=your_twitter_api_key
FACEBOOK_API_KEY=your_facebook_api_key
GOOGLE_TRANSLATE_API_KEY=your_google_translate_key
DEEPL_API_KEY=your_deepl_api_key

# ======================
# Backup and Recovery
# ======================
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=30
BACKUP_STORAGE_PATH=/backups

# ======================
# Feature Flags
# ======================
ENABLE_SMART_SCRAPERS=true
ENABLE_AI_CONTENT_CLASSIFICATION=false
ENABLE_REAL_TIME_ALERTS=true
ENABLE_USER_PERSONALIZATION=true
ENABLE_ANALYTICS_DASHBOARD=true

# ======================
# Rate Limiting
# ======================
API_RATE_LIMIT_PER_MINUTE=100
SCRAPER_RATE_LIMIT_PER_MINUTE=5
USER_RATE_LIMIT_PER_MINUTE=60

# ======================
# Documentation
# ======================
API_DOCS_URL=/docs/
ADMIN_DOCS_URL=/admin/doc/
ENABLE_REDOC=true

# ========================================
# SUPABASE (Optional)
# ========================================
# SUPABASE_URL=your-supabase-url
# SUPABASE_ANON_KEY=your-anon-key

# ============================================================================
# ✅ SECURITY AUDIT COMPLETED - Nov 3, 2025
# ============================================================================
# This .env file contains NEW credentials generated after security audit.
#
# ACTION ITEMS:
# 1. ✅ SECRET_KEY: Already updated with new value
# 2. ⚠️  DATABASE_URL: Replace YOUR_NEW_PASSWORD_HERE with new PostgreSQL password
# 3. ⚠️  REDIS: Update all 3 Redis URLs with new password from Redis Cloud
# 4. ✅ CORS: Updated to use environment variable (no more wildcard in code)
#
# For production deployment, see: docs/DEPLOYMENT_SECURITY_CHECKLIST.md
# ============================================================================
