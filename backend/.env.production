# ============================================================================
# PRODUCTION ENVIRONMENT CONFIGURATION
# OpenLearn Colombia - Colombian Intelligence & Language Learning Platform
# ============================================================================
#
# CRITICAL SECURITY INSTRUCTIONS:
#   1. NEVER commit this file with actual secrets to version control
#   2. Generate unique SECRET_KEY for production (min 64 bytes)
#   3. Use secure password management (AWS Secrets Manager, Vault, etc.)
#   4. Replace ALL placeholder values with production credentials
#   5. Validate configuration before deployment
#
# Deployment Checklist:
#   [ ] Generate unique SECRET_KEY (python scripts/generate_secret_key.py)
#   [ ] Set strong database password (16+ characters)
#   [ ] Configure Redis password
#   [ ] Set production CORS origins (exact domains)
#   [ ] Configure Sentry for error tracking
#   [ ] Set up alerting (email or Slack)
#   [ ] Enable SSL/TLS for all connections
#   [ ] Validate: python scripts/validate_config.py --env production
#
# ============================================================================

# ----------------------------------------------------------------------------
# APPLICATION SETTINGS
# ----------------------------------------------------------------------------
APP_NAME="OpenLearn Colombia - Production"
ENVIRONMENT=production
DEBUG=false

# API Configuration
API_V1_PREFIX=/api/v1
ALLOWED_HOSTS=openlearn.co,api.openlearn.co

# ----------------------------------------------------------------------------
# SECURITY CONFIGURATION (CRITICAL)
# ----------------------------------------------------------------------------
# REQUIRED: Generate with: python scripts/generate_secret_key.py --length 64
# NEVER use default or development keys in production!
SECRET_KEY=REPLACE_WITH_GENERATED_SECRET_KEY_MIN_64_BYTES

# Token Expiration (Security-hardened)
ACCESS_TOKEN_EXPIRE_MINUTES=15
REFRESH_TOKEN_EXPIRE_DAYS=7

# ----------------------------------------------------------------------------
# DATABASE CONFIGURATION
# ----------------------------------------------------------------------------
# PostgreSQL (Production)
# SECURITY: Use strong passwords (16+ chars, alphanumeric + symbols)
POSTGRES_HOST=prod-db.openlearn.co
POSTGRES_PORT=5432
POSTGRES_USER=openlearn_app
POSTGRES_PASSWORD=REPLACE_WITH_STRONG_DATABASE_PASSWORD
POSTGRES_DB=openlearn_prod

# Connection Pool (Production - Optimized for load)
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=30
DB_POOL_TIMEOUT=30
DB_ECHO=false

# ----------------------------------------------------------------------------
# CACHE & SESSION STORAGE
# ----------------------------------------------------------------------------
# Redis (Production)
# SECURITY: ALWAYS set REDIS_PASSWORD in production
REDIS_HOST=prod-redis.openlearn.co
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=REPLACE_WITH_REDIS_PASSWORD

# ----------------------------------------------------------------------------
# SEARCH ENGINE
# ----------------------------------------------------------------------------
# Elasticsearch (Production)
ELASTICSEARCH_HOST=prod-es.openlearn.co
ELASTICSEARCH_PORT=9200
ELASTICSEARCH_INDEX=openlearn_prod

# ----------------------------------------------------------------------------
# CORS CONFIGURATION (Production - Strict)
# ----------------------------------------------------------------------------
# SECURITY: List EXACT production domains only (no wildcards)
CORS_ORIGINS=https://openlearn.co,https://www.openlearn.co,https://api.openlearn.co
CORS_ALLOW_CREDENTIALS=true
CORS_ALLOW_METHODS=GET,POST,PUT,DELETE,PATCH
CORS_ALLOW_HEADERS=*

# ----------------------------------------------------------------------------
# COLOMBIAN DATA SOURCES (Production API Keys)
# ----------------------------------------------------------------------------
# SECURITY: Store actual API keys in secrets management system
DANE_API_KEY=REPLACE_WITH_DANE_API_KEY
BANREP_BASE_URL=https://www.banrep.gov.co/api
SECOP_API_TOKEN=REPLACE_WITH_SECOP_API_TOKEN
DATOS_GOV_BASE_URL=https://www.datos.gov.co/api
IDEAM_API_KEY=REPLACE_WITH_IDEAM_API_KEY
DNP_API_KEY=REPLACE_WITH_DNP_API_KEY
MINHACIENDA_API_KEY=REPLACE_WITH_MINHACIENDA_API_KEY

# ----------------------------------------------------------------------------
# WEB SCRAPING CONFIGURATION (Production)
# ----------------------------------------------------------------------------
ENABLE_SCHEDULER=true
SCRAPING_INTERVAL_MINUTES=30
MAX_CONCURRENT_SCRAPERS=10
SCRAPER_TIMEOUT=30
SCRAPER_RATE_LIMIT=10
SCRAPER_USER_AGENT="OpenLearn Bot 1.0 (+https://openlearn.co/bot)"
SCRAPER_MAX_RETRIES=3
SCRAPER_CONCURRENT_LIMIT=10

# ----------------------------------------------------------------------------
# NATURAL LANGUAGE PROCESSING (Production)
# ----------------------------------------------------------------------------
# Use large model for best accuracy in production
NLP_MODEL=es_core_news_lg
NLP_BATCH_SIZE=32
NLP_MAX_LENGTH=2000000

# ----------------------------------------------------------------------------
# TASK QUEUE (Production)
# ----------------------------------------------------------------------------
CELERY_BROKER_URL=redis://:REPLACE_WITH_REDIS_PASSWORD@prod-redis.openlearn.co:6379/1
CELERY_RESULT_BACKEND=redis://:REPLACE_WITH_REDIS_PASSWORD@prod-redis.openlearn.co:6379/1

# ----------------------------------------------------------------------------
# LOGGING & MONITORING (Production)
# ----------------------------------------------------------------------------
# Production logging (WARNING level minimum)
LOG_LEVEL=WARNING
LOG_DIR=/var/log/openlearn
LOG_ENABLE_CONSOLE=true
LOG_ENABLE_FILE=true
LOG_MAX_BYTES=52428800
LOG_BACKUP_COUNT=10
LOG_FORMAT=json

# Performance Monitoring
METRICS_ENABLED=true
METRICS_PORT=9090
HEALTH_CHECK_INTERVAL=30
SLOW_REQUEST_THRESHOLD_MS=500.0
ENABLE_PERFORMANCE_LOGGING=true

# Error Tracking (Sentry - REQUIRED for production)
# Sign up at https://sentry.io and get your DSN
SENTRY_DSN=REPLACE_WITH_SENTRY_DSN
SENTRY_ENVIRONMENT=production
SENTRY_TRACES_SAMPLE_RATE=0.01

# ----------------------------------------------------------------------------
# ALERTING CONFIGURATION (Production)
# ----------------------------------------------------------------------------
# Email Alerts (RECOMMENDED)
SMTP_HOST=smtp.sendgrid.net
SMTP_PORT=587
SMTP_USER=REPLACE_WITH_SMTP_USER
SMTP_PASSWORD=REPLACE_WITH_SMTP_PASSWORD
ALERT_EMAIL_FROM=noreply@openlearn.co
ALERT_EMAIL_TO=ops@openlearn.co,admin@openlearn.co

# Slack Alerts (RECOMMENDED)
SLACK_WEBHOOK_URL=REPLACE_WITH_SLACK_WEBHOOK_URL
SLACK_CHANNEL=#production-alerts

# ----------------------------------------------------------------------------
# PYTHON CONFIGURATION
# ----------------------------------------------------------------------------
PYTHONPATH=/app

# ============================================================================
# PRODUCTION DEPLOYMENT VERIFICATION
# ============================================================================
#
# Before deploying, verify:
#   1. All REPLACE_WITH_* placeholders are updated
#   2. SECRET_KEY is unique and 64+ bytes
#   3. Database password is strong (16+ chars)
#   4. Redis password is set
#   5. CORS_ORIGINS contains exact production domains only
#   6. Sentry DSN is configured
#   7. Alert channels are configured (email or Slack)
#   8. DEBUG=false
#   9. LOG_LEVEL=WARNING or ERROR
#  10. All API keys are from production accounts
#
# Run validation:
#   python scripts/validate_config.py --env production
#
# ============================================================================
